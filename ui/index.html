<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SeNARS UI2</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
<div class="app-container">
    <div class="log-panel">
        <div class="panel-header">
            <span>SeNARS Control</span>
            <div class="control-toolbar">
                <button id="btn-start" class="icon-btn" title="Run Continuous">‚ñ∂</button>
                <button id="btn-stop" class="icon-btn" title="Stop">‚èπ</button>
                <button id="btn-step" class="icon-btn" title="Single Step">‚èØ</button>
                <button id="btn-reset" class="icon-btn" title="Reset System">üîÑ</button>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <div class="status-indicator status-disconnected" id="status-indicator"></div>
                <span id="connection-status">Disconnected</span>
            </div>
            <div class="status-item">
                <span id="cycle-count" class="cycle-badge">Cycle: 0</span>
                <span class="divider">|</span>
                <span id="message-count">0</span> msgs
            </div>
        </div>

        <div class="logs-container" id="logs-container">
            <div class="log-entry type-info">
                <span class="log-entry-icon">üöÄ</span>
                <div class="log-entry-content">SeNARS UI2 - Ready</div>
                <span class="log-entry-time" id="time-0"></span>
            </div>
        </div>

        <div class="input-section">
            <div class="input-mode-toggle">
                <label class="mode-option"><input type="radio" name="input-mode" id="mode-narsese" value="narsese" checked> Narsese</label>
                <label class="mode-option"><input type="radio" name="input-mode" id="mode-agent" value="agent"> Agent</label>
            </div>
            <div class="input-group">
                <input autocomplete="off" id="command-input" placeholder="Enter Narsese command..." type="text">
                <button id="send-button">Send</button>
            </div>
            <div class="input-group">
                <select id="quick-commands">
                    <option value="">Quick Commands...</option>
                    <option value="&lt;cat --&gt; animal&gt; .">Basic Assertion</option>
                    <option value="&lt;bird --&gt; flyer&gt; . %1.0;0.9%">Assertion with Truth Value</option>
                    <option value="&lt;dog --&gt; pet&gt; ?">Question</option>
                    <option value="&lt;(cat & dog) --&gt; pets&gt; .">Compound Term</option>
                    <option value="&lt;swan --&gt; flyer&gt; !">Goal</option>
                    <option value="*step">Single Step</option>
                    <option value="*run">Run Continuous</option>
                    <option value="*stop">Stop</option>
                    <option value="*reset">Reset</option>
                </select>
                <button id="exec-quick">Execute</button>
                <button id="show-history">History</button>
                <button id="clear-logs">Clear</button>
            </div>
        </div>
    </div>

    <div class="graph-panel">
        <div class="cytoscape-container" id="graph-container"></div>
        <div class="graph-controls">
            <button id="refresh-graph" title="Refresh Graph">üîÑ Graph</button>
            <button id="toggle-live" title="Toggle Live Updates">üì° Live</button>
            <div class="separator"></div>
            <button id="btn-save" title="Save State">üíæ Save</button>
            <button id="btn-load" title="Load State">üìÇ Load</button>
            <div class="separator"></div>
            <label class="checkbox-control" title="Show/Hide Tasks">
                <input type="checkbox" id="show-tasks-toggle" checked> Tasks
            </label>
            <div class="separator"></div>
            <select id="demo-select">
                <option value="">Select Demo...</option>
            </select>
            <button id="run-demo">Run Demo</button>
        </div>
        <div class="graph-details-panel" id="graph-details">
            Click on nodes or edges to see details
        </div>
    </div>
</div>

<div class="notification-container" id="notification-container"></div>

<script>
    // Inject WebSocket configuration from server
    window.WEBSOCKET_CONFIG = {
        port: '{{WEBSOCKET_PORT}}',
        host: '{{WEBSOCKET_HOST}}'
    };
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.25.0/cytoscape.min.js"></script>
<script src="src/SeNARSUI.js" type="module"></script>
</body>
</html>