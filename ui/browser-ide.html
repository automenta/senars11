<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>SeNARS Browser IDE</title>
    <link href="style.css" rel="stylesheet">
    <!-- Golden Layout CSS -->
    <link type="text/css" rel="stylesheet" href="https://golden-layout.com/files/latest/css/goldenlayout-base.css" />
    <link type="text/css" rel="stylesheet"
        href="https://golden-layout.com/files/latest/css/goldenlayout-dark-theme.css" />

    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        .lm_content {
            background: #1a1a1a;
            color: #f0f0f0;
        }

        .hidden {
            display: none !important;
        }

        /* Restore hidden utility for components */
    </style>

    <script type="importmap">
        {
            "imports": {
                "@senars/core": "../browser-bundle.js",
                "@senars/metta": "../browser-bundle.js",
                "@senars/tensor": "../browser-bundle.js",
                "@senars/agent": "../agent/src/browser.js"
            }
        }
    </script>
</head>

<body>

    <!-- Hidden templates for panels -->
    <div id="templates" style="display:none">
        <div id="graph-template" class="panel-content" style="height:100%">
            <!-- Reusing structure from index.html for Graph -->
            <div class="cytoscape-container" id="graph-container" style="width:100%; height:100%"></div>
        </div>

        <div id="repl-template" class="panel-content" style="height:100%; display:flex; flex-direction:column">
            <!-- Reusing REPL structure -->
            <div class="logs-container" id="logs-container" style="flex:1; overflow-y:auto; padding:10px;"></div>
            <div class="input-section" style="padding:10px; border-top:1px solid #333;">
                <input type="text" id="command-input" placeholder="Enter Narsese..."
                    style="width:70%; padding:8px; background:#222; color:white; border:1px solid #444;">
                <button id="send-button" style="padding:8px 16px; cursor:pointer">Send</button>
            </div>
        </div>

        <div id="control-template" class="panel-content">
            <div style="padding:10px">
                <h3>Control</h3>
                <button id="btn-step">Step</button>
                <button id="btn-run">Run</button>
                <button id="btn-stop">Stop</button>
                <button id="btn-reset">Reset</button>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="https://golden-layout.com/files/latest/js/goldenlayout.min.js"></script>

    <!-- Cytoscape Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.25.0/cytoscape.min.js"></script>
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
    <script src="https://unpkg.com/cytoscape-fcose/cytoscape-fcose.js"></script>

    <script type="module" src="src/browser-init.js"></script>

</body>

</html>