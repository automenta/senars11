<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SeNARS REPL Debug</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }
        #status-bar {
            padding: 8px;
            background-color: #333;
            color: white;
            font-size: 14px;
        }
        .status-connected { background-color: #4CAF50; }
        .status-disconnected { background-color: #f44336; }
        .status-connecting { background-color: #FF9800; }
        .status-error { background-color: #f44336; }
        
        #repl-container {
            margin: 20px;
            max-width: 800px;
        }
        
        #repl-input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        #repl-output {
            width: 100%;
            height: 400px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #f9f9f9;
            font-family: monospace;
            white-space: pre-wrap;
            margin-top: 10px;
            box-sizing: border-box;
        }
        
        #debug-controls {
            margin: 20px;
            padding: 15px;
            background-color: #e9e9e9;
            border-radius: 5px;
        }
        
        .debug-btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .debug-btn {
            padding: 8px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .debug-btn:hover {
            background-color: #0056b3;
        }
        
        .debug-btn.test-btn {
            background-color: #28a745;
        }
        
        .debug-btn.test-btn:hover {
            background-color: #1e7e34;
        }
        
        .debug-btn.diag-btn {
            background-color: #ffc107;
            color: #212529;
        }
        
        .debug-btn.diag-btn:hover {
            background-color: #e0a800;
        }
        
        .connection-info {
            margin-top: 10px;
            padding: 10px;
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="status-bar">Connecting...</div>
    
    <div id="repl-container"></div>
    
    <div id="debug-controls">
        <h3>REPL Debug Controls</h3>
        
        <div class="debug-btn-group">
            <button class="debug-btn diag-btn" id="btn-state">/state</button>
            <button class="debug-btn diag-btn" id="btn-nodes">/nodes</button>
            <button class="debug-btn diag-btn" id="btn-tasks">/tasks</button>
            <button class="debug-btn diag-btn" id="btn-concepts">/concepts</button>
            <button class="debug-btn diag-btn" id="btn-cy-info">/cy-info</button>
        </div>
        
        <div class="debug-btn-group">
            <button class="debug-btn test-btn" id="btn-add-dummy">/debug-visualize</button>
            <button class="debug-btn test-btn" id="btn-refresh">/refresh</button>
            <button class="debug-btn test-btn" id="btn-help">/help</button>
        </div>
        
        <div class="debug-btn-group">
            <button class="debug-btn" id="btn-toggle-live">Pause Live Updates</button>
            <button class="debug-btn" id="btn-clear-output">Clear Output</button>
        </div>
        
        <div class="debug-btn-group">
            <label>Test Inputs:</label>
            <select id="test-inputs-select">
                <option value="">Select test input</option>
                <option value="<a --> b>.">&lt;a --&gt; b&gt;.</option>
                <option value="<a --> b>?">&lt;a --&gt; b&gt;?</option>
                <option value="<b --> c>.">&lt;b --&gt; c&gt;.</option>
                <option value="<(&amp;,a,b) --> c>.">(&amp;,&lt;a --&gt; b&gt;). (Compound)</option>
                <option value="5">5 (Budget)</option>
                <option value="10">10 (Step)</option>
                <option value="*volume=10">*volume=10 (System Op)</option>
                <option value="*decisionthreshold=0.5">*decisionthreshold=0.5 (System Op)</option>
                <option value="<a =/> b>. %1.0;0.9%">Truth value example</option>
            </select>
            <button class="debug-btn" id="btn-send-test">Send Test Input</button>
        </div>
        
        <div class="connection-info">
            <h4>Connection Information</h4>
            <p><strong>Current Status:</strong> <span id="conn-status">Initializing</span></p>
            <p><strong>Live Updates:</strong> <span id="live-updates-status">Initializing</span></p>
            <p><strong>Graph Nodes:</strong> <span id="nodes-count">0</span> | <strong>Edges:</strong> <span id="edges-count">0</span></p>
        </div>
    </div>

    <script type="module" src="/src/main-repl.js"></script>
</body>
</html>